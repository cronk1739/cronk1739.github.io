<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Secret Slideshow</title>
    <style>
        html,body{height:100%;margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:transparent;color:#fff}
        .wrap{min-height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px;box-sizing:border-box}
        .slideshow-container{position:relative;width:100%;max-width:1100px}
        .mySlides{display:none}
        .gallery-image{width:100%;height:auto;object-fit:contain;border-radius:8px}
        .controls{display:flex;gap:8px;align-items:center;justify-content:center;margin-top:8px}
        .prev,.next{cursor:pointer;padding:8px 12px;border-radius:6px;background:rgba(0,0,0,0.35);color:#fff}
        .dot{height:10px;width:10px;border-radius:50%;background:#777;display:inline-block;margin:0 6px}

        /* password overlay */
        #pw-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.8));z-index:9999}
        #pw-box{background:#07112b;padding:18px;border-radius:8px;min-width:320px;color:#fff;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
        #pw-box input[type=password]{width:100%;padding:8px;margin-top:8px;border-radius:6px;border:1px solid #234}
        #pw-box button{margin-top:10px;padding:8px 10px;border-radius:6px;border:0;background:#ff4d94;color:#fff}
        #pw-hint{font-size:13px;color:#ddd;margin-top:6px}
    </style>
</head>
<body>
    <div class="wrap">
        <div class="slideshow-container" id="slideshow">
                <!-- provide a few default secret images from the site's assets so the page isn't blank -->
                <div class="mySlides"><img class="gallery-image" src="assets/img_MineCraftStevedeath.JPG" alt="Secret image 1"></div>
                <div class="mySlides"><img class="gallery-image" src="assets/img_RandomGuy.JPG" alt="Secret image 2"></div>
                <div class="mySlides"><img class="gallery-image" src="assets/img_TheLioneatsthesmallchild.JPG" alt="Secret image 3"></div>
            </div>
        <div class="controls" id="controls" style="display:none">
            <button class="prev" onclick="plusSlides(-1)">◀</button>
            <div id="dots"></div>
            <button class="next" onclick="plusSlides(1)">▶</button>
        </div>
    </div>

    <div id="pw-overlay" role="dialog" aria-modal="true" aria-labelledby="pw-title">
        <div id="pw-box">
            <div id="pw-title" style="font-weight:700">Enter password to view</div>
            <input id="pw-input" type="password" placeholder="Password" aria-label="Secret password">
            <label style="display:flex;align-items:center;gap:8px;margin-top:8px"><input id="pw-show" type="checkbox"> Show password</label>
            <div style="display:flex;gap:8px;margin-top:8px"><button id="pw-submit">Unlock</button><button id="pw-cancel">Cancel</button></div>
            <div id="pw-hint">Hint: ask the admin for the secret password.</div>
        </div>
    </div>

    <script>
        // simple client-side password gate (session-only)
    const CORRECT = 'M30W'; // change to desired password
    // Use an in-memory unlocked flag so this frame remains authoritative and cannot be bypassed
    let unlockedInThisFrame = false;
        const overlay = document.getElementById('pw-overlay');
        const input = document.getElementById('pw-input');
        const submit = document.getElementById('pw-submit');
        const cancel = document.getElementById('pw-cancel');
        const showToggle = document.getElementById('pw-show');

        // helper to prevent background scroll while overlay visible
        function setBodyScrollDisabled(disabled){ try{ document.documentElement.style.overflow = disabled ? 'hidden' : ''; document.body.style.overflow = disabled ? 'hidden' : ''; }catch(e){} }

    function doUnlockFromValue(v){ const val = String(v||''); if(val === CORRECT){ unlockedInThisFrame = true; try{ overlay.style.display='none'; }catch(e){} setBodyScrollDisabled(false); initSlideshow(); try{ window.parent.postMessage({ type: 'secret-unlocked' }, '*'); }catch(e){} return true; } return false; }

        function unlock(){ const v = input.value || ''; if(doUnlockFromValue(v)){ return; } alert('Incorrect password'); input.value=''; input.focus(); }

        submit.addEventListener('click', unlock);
        input.addEventListener('keydown', (e)=>{ if(e.key==='Enter') unlock(); });
        cancel.addEventListener('click', ()=>{ try{ overlay.style.display='none'; setBodyScrollDisabled(false); }catch(e){} });
        if(showToggle){ showToggle.addEventListener('change', ()=>{ try{ input.type = showToggle.checked ? 'text' : 'password'; }catch(e){} }); }

        // listen for parent messages to attempt unlock via postMessage
        window.addEventListener('message', (ev)=>{
            try{
                if(!ev.data) return;
                // enforce same-origin postMessage to reduce risk (only accept messages from same origin)
                if(ev.origin !== location.origin) return;
                if(ev.data.type === 'try-unlock'){
                    const pw = String(ev.data.password || '');
                    const ok = doUnlockFromValue(pw);
                    if(!ok){ try{ window.parent.postMessage({ type: 'secret-unlock-failed' }, location.origin); }catch(e){} }
                }
            }catch(e){}
        });

        // always require an in-frame unlock; ensure overlay is visible and blocks scroll until unlocked
        try{ overlay.style.display='flex'; setBodyScrollDisabled(true); input.focus(); }catch(e){}

        // minimal slideshow scaffold
        let slideIndex = 1;
        function initSlideshow(){
            const slides = document.getElementsByClassName('mySlides');
            const controls = document.getElementById('controls');
            const dotsWrap = document.getElementById('dots');
            // show controls if there's more than 1 slide
            if(slides.length>1){ controls.style.display = 'flex'; }
            // build dots
            dotsWrap.innerHTML='';
            for(let i=0;i<slides.length;i++){ const s=document.createElement('span'); s.className='dot'; s.addEventListener('click', (function(i0){ return function(){ currentSlide(i0+1); }; })(i)); dotsWrap.appendChild(s); }
            showSlides(slideIndex);
        }
        function plusSlides(n){ showSlides(slideIndex += n); }
        function currentSlide(n){ showSlides(slideIndex = n); }
        function showSlides(n){ const slides=document.getElementsByClassName('mySlides'); const dots=document.getElementsByClassName('dot'); if(slides.length===0) return; if(n>slides.length) slideIndex=1; if(n<1) slideIndex=slides.length; for(let i=0;i<slides.length;i++){ slides[i].style.display='none'; } for(let i=0;i<dots.length;i++){ dots[i].className = dots[i].className.replace(' active',''); } slides[slideIndex-1].style.display='block'; if(dots[slideIndex-1]) dots[slideIndex-1].className += ' active'; }
    </script>
</body>
</html>